<!DOCTYPE html>
<html lang="en" ng-app="app">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>starálfur</title>
    <meta name="description" content="starálfur">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
</head>
<body ng-controller="AppController">
  <div id="profile_instagram"></div>
  <button onclick="hello('instagram').login()">IG</button>    
    
  <input type="text" ng-model="search" ng-change="doSearch()" />    
    
  <div ng-repeat="m in media">
      {{m.caption.text}}  
  </div>
    
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.js"></script>
  <script src="js/hello.all.min.js"></script>
  <script>
      

    angular.module('app', [])
    .controller('AppController', ['$scope', '$http', '$window', function($scope, $http, $window) {
        
        var hello = $window.hello;
        $scope.access_token = '';
        $scope.user = {};
        $scope.media = [];
        
        $scope.init = function(){
            hello.init({ 
                instagram : 'f9b6f7bd772044dd9f0344dc5af4f056'
            },{redirect_uri:''});
            
            hello.on('auth.login', function(auth){
               $scope.access_token = auth.authResponse.access_token;
                    // call user information, for the given network
                    hello( auth.network ).api( '/me' ).then( function(r){
                        $scope.user = r;
                        
                    });
                });
        };
        $scope.init();
        
        $scope.doSearch = function(){
            $http.jsonp({
                url: 'https://api.instagram.com/v1/users/'+$scope.user.id+'/media/recent/?access_token='+$scope.access_token+'&count=100&callback=JSON_CALLBACK'
                }).success(
                    function(response, status){
                        $scope.media = response.data;
                    }
                ).error(
                    function(response, status){
                    
                    }
                );
        };
        
    }]);


      
      
      

      var access_token = '';
      
      
  </script>
</body>
</html>
